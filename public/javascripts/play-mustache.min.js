/*
 * play-mustache JavaScript dependency
 * 
 * This file includes mustache.js â€” Logic-less templates in JavaScript
 * mustache.js is copyright (c) 2010 Jan Lehnardt
 * (c) 2012 Stanislas Duprey
 */
var Mustache=function(){function g(a){return String(a).replace(/&(?!\w+;)|[<>"']/g,function(a){return f[a]||a})}var a=Object.prototype.toString;Array.isArray=Array.isArray||function(b){return a.call(b)=="[object Array]"};var b=String.prototype.trim,c;if(b){c=function(a){return a==null?"":b.call(a)}}else{var d,e;if(/\S/.test(" ")){d=/^[\s\xA0]+/;e=/[\s\xA0]+$/}else{d=/^\s+/;e=/\s+$/}c=function(a){return a==null?"":a.toString().replace(d,"").replace(e,"")}}var f={"&":"&","<":"<",">":">",'"':""","'":"&#39;"};var h={};var i=function(){};i.prototype={otag:"{{",ctag:"}}",pragmas:{},buffer:[],pragmas_implemented:{"IMPLICIT-ITERATOR":true},context:{},render:function(a,b,c,d){if(!d){this.context=b;this.buffer=[]}if(!this.includes("",a)){if(d){return a}else{this.send(a);return}}a=this.render_pragmas(a);var e=this.render_section(a,b,c);if(e===false){e=this.render_tags(a,b,c,d)}if(d){return e}else{this.sendLines(e)}},send:function(a){if(a!==""){this.buffer.push(a)}},sendLines:function(a){if(a){var b=a.split("\n");for(var c=0;c<b.length;c++){this.send(b[c])}}},render_pragmas:function(a){if(!this.includes("%",a)){return a}var b=this;var c=this.getCachedRegex("render_pragmas",function(a,b){return new RegExp(a+"%([\\w-]+) ?([\\w]+=[\\w]+)?"+b,"g")});return a.replace(c,function(a,c,d){if(!b.pragmas_implemented[c]){throw{message:"This implementation of mustache doesn't understand the '"+c+"' pragma"}}b.pragmas[c]={};if(d){var e=d.split("=");b.pragmas[c][e[0]]=e[1]}return""})},render_partial:function(a,b,d){a=c(a);if(!d||d[a]===undefined){throw{message:"unknown_partial '"+a+"'"}}if(!b||typeof b[a]!="object"){return this.render(d[a],b,d,true)}return this.render(d[a],b[a],d,true)},render_section:function(a,b,c){if(!this.includes("#",a)&&!this.includes("^",a)){return false}var d=this;var e=this.getCachedRegex("render_section",function(a,b){return new RegExp("^([\\s\\S]*?)"+a+"(\\^|\\#)\\s*(.+)\\s*"+b+"\n*([\\s\\S]*?)"+a+"\\/\\s*\\3\\s*"+b+"\\s*([\\s\\S]*)$","g")});return a.replace(e,function(a,e,f,g,h,i){var j=e?d.render_tags(e,b,c,true):"",k=i?d.render(i,b,c,true):"",l,m=d.find(g,b);if(f==="^"){if(!m||Array.isArray(m)&&m.length===0){l=d.render(h,b,c,true)}else{l=""}}else if(f==="#"){if(Array.isArray(m)){l=d.map(m,function(a){return d.render(h,d.create_context(a),c,true)}).join("")}else if(d.is_object(m)){l=d.render(h,d.create_context(m),c,true)}else if(typeof m=="function"){l=m.call(b,h,function(a){return d.render(a,b,c,true)})}else if(m){l=d.render(h,b,c,true)}else{l=""}}return j+l+k})},render_tags:function(a,b,c,d){var e=this;var f=function(){return e.getCachedRegex("render_tags",function(a,b){return new RegExp(a+"(=|!|>|&|\\{|%)?([^#\\^]+?)\\1?"+b+"+","g")})};var h=f();var i=function(a,d,i){switch(d){case"!":return"";case"=":e.set_delimiters(i);h=f();return"";case">":return e.render_partial(i,b,c);case"{":case"&":return e.find(i,b);default:return g(e.find(i,b))}};var j=a.split("\n");for(var k=0;k<j.length;k++){j[k]=j[k].replace(h,i,this);if(!d){this.send(j[k])}}if(d){return j.join("\n")}},set_delimiters:function(a){var b=a.split(" ");this.otag=this.escape_regex(b[0]);this.ctag=this.escape_regex(b[1])},escape_regex:function(a){if(!arguments.callee.sRE){var b=["/",".","*","+","?","|","(",")","[","]","{","}","\\"];arguments.callee.sRE=new RegExp("(\\"+b.join("|\\")+")","g")}return a.replace(arguments.callee.sRE,"\\$1")},find:function(a,b){function d(a){return a===false||a===0||a}a=c(a);var e;if(a.match(/([a-z_]+)\./ig)){var f=this.walk_context(a,b);if(d(f)){e=f}}else{if(d(b[a])){e=b[a]}else if(d(this.context[a])){e=this.context[a]}}if(typeof e=="function"){return e.apply(b)}if(e!==undefined){return e}return""},walk_context:function(a,b){var c=a.split(".");var d=b[c[0]]!=undefined?b:this.context;var e=d[c.shift()];while(e!=undefined&&c.length>0){d=e;e=e[c.shift()]}if(typeof e=="function"){return e.apply(d)}return e},includes:function(a,b){return b.indexOf(this.otag+a)!=-1},create_context:function(a){if(this.is_object(a)){return a}else{var b=".";if(this.pragmas["IMPLICIT-ITERATOR"]){b=this.pragmas["IMPLICIT-ITERATOR"].iterator}var c={};c[b]=a;return c}},is_object:function(a){return a&&typeof a=="object"},map:function(a,b){if(typeof a.map=="function"){return a.map(b)}else{var c=[];var d=a.length;for(var e=0;e<d;e++){c.push(b(a[e]))}return c}},getCachedRegex:function(a,b){var c=h[this.otag];if(!c){c=h[this.otag]={}}var d=c[this.ctag];if(!d){d=c[this.ctag]={}}var e=d[a];if(!e){e=d[a]=b(this.otag,this.ctag)}return e}};return{name:"mustache.js",version:"0.5.0-dev",to_html:function(a,b,c,d){var e=new i;if(d){e.send=d}e.render(a,b||{},c);if(!d){return e.buffer.join("\n")}}}}();if(!this.JSON){this.JSON={}}(function(){function str(a,b){var c,d,e,f,g=gap,h,i=b[a];if(i&&typeof i==="object"&&typeof i.toJSON==="function"){i=i.toJSON(a)}if(typeof rep==="function"){i=rep.call(b,a,i)}switch(typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i){return"null"}gap+=indent;h=[];if(Object.prototype.toString.apply(i)==="[object Array]"){f=i.length;for(c=0;c<f;c+=1){h[c]=str(c,i)||"null"}e=h.length===0?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]";gap=g;return e}if(rep&&typeof rep==="object"){f=rep.length;for(c=0;c<f;c+=1){d=rep[c];if(typeof d==="string"){e=str(d,i);if(e){h.push(quote(d)+(gap?": ":":")+e)}}}}else{for(d in i){if(Object.hasOwnProperty.call(i,d)){e=str(d,i);if(e){h.push(quote(d)+(gap?": ":":")+e)}}}}e=h.length===0?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}";gap=g;return e}}function quote(a){escapable.lastIndex=0;return escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return typeof b==="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function f(a){return a<10?"0"+a:a}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;if(typeof JSON.stringify!=="function"){JSON.stringify=function(a,b,c){var d;gap="";indent="";if(typeof c==="number"){for(d=0;d<c;d+=1){indent+=" "}}else{if(typeof c==="string"){indent=c}}rep=b;if(b&&typeof b!=="function"&&(typeof b!=="object"||typeof b.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":a})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&typeof e==="object"){for(c in e){if(Object.hasOwnProperty.call(e,c)){d=walk(e,c);if(d!==undefined){e[c]=d}else{delete e[c]}}}}return reviver.call(a,b,e)}var j;text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}})();var PlayMustache=function(){var a=document.getElementById("play-mustache-templates");var b=JSON.parse(decodeURIComponent(a.content));return{to_html:function(a,c){var d=b.templates[a.replace("-","_")];var e={};var f=d.match(/{{>([\w\s\d/_]+)}}/g);if(f)for(var g=0,h=f.length;g<h;g++){if(typeof f[g]=="undefined")break;var a=f[g].replace("{{>","").replace("}}","");var i=a.substr(a.lastIndexOf("/")+1);e[a]=b.templates[i+".html"]}return Mustache.to_html(d,c,e)}}}()